<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„±ì°° ì§ˆë¬¸ - EmotiCare</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .reflection-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .intro-section {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            text-align: center;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
        }
        
        .intro-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .intro-text {
            font-size: 1.1rem;
            line-height: 1.6;
            opacity: 0.9;
        }
        
        .categories-grid {
            display: grid;
            gap: 2rem;
        }
        
        .category-section {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .category-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.15);
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            cursor: pointer;
        }
        
        .category-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
        }
        
        .category-icon.self-understanding {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .category-icon.emotions {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }
        
        .category-icon.relationships {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }
        
        .category-icon.growth {
            background: linear-gradient(135deg, #f9ca24, #f0932b);
        }
        
        .category-icon.stress {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
        }
        
        .category-icon.mindfulness {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        }
        
        .category-info {
            flex: 1;
        }
        
        .category-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .category-description {
            color: #666;
            font-size: 1rem;
        }
        
        .category-toggle {
            color: #667eea;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .category-toggle.expanded {
            transform: rotate(180deg);
        }
        
        .questions-list {
            display: none;
            padding-top: 1rem;
        }
        
        .questions-list.expanded {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question-item {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .question-item:hover {
            background: #e8f0ff;
            transform: translateX(5px);
        }
        
        .question-text {
            font-size: 1.1rem;
            color: #333;
            line-height: 1.5;
            margin-bottom: 1rem;
        }
        
        .question-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .reflect-btn, .save-btn {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .reflect-btn:hover, .save-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .random-question {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .random-question-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #333;
        }
        
        .random-question-text {
            font-size: 1.2rem;
            color: #667eea;
            margin-bottom: 2rem;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .new-question-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .new-question-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }
        
        .reflection-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        
        .reflection-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .reflection-question {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .reflection-textarea {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
            margin-bottom: 1.5rem;
        }
        
        .reflection-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
    </style>
</head>
<body>
    <div id="header-container"></div>
    
    <main>
        <section class="page-header">
            <div class="container">
                <h1 class="page-title">ì„±ì°° ì§ˆë¬¸</h1>
                <p class="page-subtitle">ê¹Šì´ ìˆëŠ” ì§ˆë¬¸ë“¤ë¡œ ìì‹ ì„ ë” ì˜ ì´í•´í•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”</p>
            </div>
        </section>
        
        <section class="page-content">
            <div class="reflection-container">
                <div class="intro-section">
                    <h2 class="intro-title">ğŸ¤” ìê¸° ì„±ì°°ì˜ ì‹œê°„</h2>
                    <p class="intro-text">
                        ì„±ì°°ì€ ìì‹ ì„ ë” ê¹Šì´ ì´í•´í•˜ê³  ì„±ì¥í•  ìˆ˜ ìˆëŠ” ì†Œì¤‘í•œ ì‹œê°„ì…ë‹ˆë‹¤.<br>
                        ê° ì§ˆë¬¸ì— ëŒ€í•´ ì²œì²œíˆ ìƒê°í•´ë³´ê³ , ì†”ì§í•œ ë§ˆìŒìœ¼ë¡œ ë‹µí•´ë³´ì„¸ìš”.
                    </p>
                </div>
                
                <div class="random-question">
                    <h3 class="random-question-title">ğŸ’¡ ì˜¤ëŠ˜ì˜ ì„±ì°° ì§ˆë¬¸</h3>
                    <div class="random-question-text" id="randomQuestionText">ë¡œë”© ì¤‘...</div>
                    <button class="new-question-btn" onclick="loadRandomQuestion()">
                        <i class="fas fa-sync-alt"></i> ìƒˆë¡œìš´ ì§ˆë¬¸
                    </button>
                </div>
                
                <div class="categories-grid">
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('self-understanding')">
                            <div class="category-icon self-understanding">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="category-info">
                                <h3 class="category-title">ìê¸° ì´í•´</h3>
                                <p class="category-description">ë‚˜ëŠ” ëˆ„êµ¬ì¸ê°€? ë‚´ ê°€ì¹˜ê´€ê³¼ ì‹ ë…ì€ ë¬´ì—‡ì¸ê°€?</p>
                            </div>
                            <div class="category-toggle" id="toggle-self-understanding">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="questions-list" id="questions-self-understanding">
                            <!-- ìê¸° ì´í•´ ì§ˆë¬¸ë“¤ -->
                        </div>
                    </div>
                    
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('emotions')">
                            <div class="category-icon emotions">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="category-info">
                                <h3 class="category-title">ê°ì • ë‹¤ë£¨ê¸°</h3>
                                <p class="category-description">ë‚´ ê°ì •ì„ ì–´ë–»ê²Œ ì´í•´í•˜ê³  í‘œí˜„í•  ê²ƒì¸ê°€?</p>
                            </div>
                            <div class="category-toggle" id="toggle-emotions">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="questions-list" id="questions-emotions">
                            <!-- ê°ì • ë‹¤ë£¨ê¸° ì§ˆë¬¸ë“¤ -->
                        </div>
                    </div>
                    
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('relationships')">
                            <div class="category-icon relationships">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="category-info">
                                <h3 class="category-title">ê´€ê³„</h3>
                                <p class="category-description">íƒ€ì¸ê³¼ì˜ ê´€ê³„ì—ì„œ ë‚˜ëŠ” ì–´ë–¤ ëª¨ìŠµì¸ê°€?</p>
                            </div>
                            <div class="category-toggle" id="toggle-relationships">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="questions-list" id="questions-relationships">
                            <!-- ê´€ê³„ ì§ˆë¬¸ë“¤ -->
                        </div>
                    </div>
                    
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('growth')">
                            <div class="category-icon growth">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <div class="category-info">
                                <h3 class="category-title">ì„±ì¥</h3>
                                <p class="category-description">ì–´ë–»ê²Œ ë” ë‚˜ì€ ì‚¬ëŒì´ ë  ìˆ˜ ìˆì„ê¹Œ?</p>
                            </div>
                            <div class="category-toggle" id="toggle-growth">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="questions-list" id="questions-growth">
                            <!-- ì„±ì¥ ì§ˆë¬¸ë“¤ -->
                        </div>
                    </div>
                    
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('stress')">
                            <div class="category-icon stress">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="category-info">
                                <h3 class="category-title">ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬</h3>
                                <p class="category-description">ìŠ¤íŠ¸ë ˆìŠ¤ì™€ ì–´ë ¤ì›€ì„ ì–´ë–»ê²Œ ê·¹ë³µí•  ê²ƒì¸ê°€?</p>
                            </div>
                            <div class="category-toggle" id="toggle-stress">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="questions-list" id="questions-stress">
                            <!-- ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ì§ˆë¬¸ë“¤ -->
                        </div>
                    </div>
                    
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('mindfulness')">
                            <div class="category-icon mindfulness">
                                <i class="fas fa-lotus"></i>
                            </div>
                            <div class="category-info">
                                <h3 class="category-title">ë§ˆìŒì±™ê¹€</h3>
                                <p class="category-description">í˜„ì¬ ìˆœê°„ì— ì§‘ì¤‘í•˜ê³  í‰ì•ˆì„ ì°¾ëŠ” ë°©ë²•ì€?</p>
                            </div>
                            <div class="category-toggle" id="toggle-mindfulness">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="questions-list" id="questions-mindfulness">
                            <!-- ë§ˆìŒì±™ê¹€ ì§ˆë¬¸ë“¤ -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- ì„±ì°° ëª¨ë‹¬ -->
    <div class="reflection-modal" id="reflectionModal">
        <div class="reflection-modal-content">
            <div class="modal-header">
                <h3>ì„±ì°°í•˜ê¸°</h3>
                <button class="modal-close" onclick="closeReflectionModal()">&times;</button>
            </div>
            <div class="reflection-question" id="modalQuestion"></div>
            <textarea 
                class="reflection-textarea" 
                id="reflectionTextarea"
                placeholder="ì´ ì§ˆë¬¸ì— ëŒ€í•´ ììœ ë¡­ê²Œ ìƒê°ì„ ì ì–´ë³´ì„¸ìš”..."
            ></textarea>
            <div class="modal-actions">
                <button class="btn-outline" onclick="closeReflectionModal()">ë‹«ê¸°</button>
                <button class="btn-primary" onclick="saveReflection()">ì €ì¥í•˜ê¸°</button>
            </div>
        </div>
    </div>
    
    <div id="footer-container"></div>
    
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="common.js"></script>
    <script>
        const reflectionQuestions = {
            'self-understanding': [
                "ë‚˜ëŠ” ì–´ë–¤ ì‚¬ëŒì¸ê°€? ë‚˜ë¥¼ ê°€ì¥ ì˜ í‘œí˜„í•˜ëŠ” ì„¸ ê°€ì§€ ë‹¨ì–´ëŠ” ë¬´ì—‡ì¸ê°€?",
                "ë‚´ê°€ ê°€ì¥ ì†Œì¤‘í•˜ê²Œ ì—¬ê¸°ëŠ” ê°€ì¹˜ëŠ” ë¬´ì—‡ì¸ê°€?",
                "ë‚˜ì˜ ê°•ì ê³¼ ì•½ì ì€ ë¬´ì—‡ì¸ê°€? ì´ë¥¼ ì–´ë–»ê²Œ í™œìš©í•˜ê³  ê°œì„ í•  ìˆ˜ ìˆì„ê¹Œ?",
                "10ë…„ í›„ ë‚˜ëŠ” ì–´ë–¤ ëª¨ìŠµì´ê³  ì‹¶ì€ê°€?",
                "ë‚˜ë¥¼ ê°€ì¥ í–‰ë³µí•˜ê²Œ ë§Œë“œëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€?",
                "ë‚´ê°€ ê°€ì¥ ìë‘ìŠ¤ëŸ¬ì›Œí•˜ëŠ” ìˆœê°„ì€ ì–¸ì œì˜€ë‚˜?",
                "ë‚˜ëŠ” ì–´ë–¤ ìƒí™©ì—ì„œ ê°€ì¥ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ëŠ”ê°€?",
                "ë‚´ ì¸ìƒì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ë¬´ì—‡ì¸ê°€?"
            ],
            'emotions': [
                "ì§€ê¸ˆ ë‚´ê°€ ëŠë¼ëŠ” ê°ì •ì€ ë¬´ì—‡ì¸ê°€? ì´ ê°ì •ì˜ ì›ì¸ì€ ë¬´ì—‡ì¼ê¹Œ?",
                "ë‚˜ëŠ” ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ê°ì •ì„ í‘œí˜„í•˜ëŠ”ê°€?",
                "ë¶€ì •ì ì¸ ê°ì •ì„ ëŠë‚„ ë•Œ ë‚˜ëŠ” ì–´ë–»ê²Œ ëŒ€ì²˜í•˜ëŠ”ê°€?",
                "ë‚´ê°€ ê°€ì¥ ìì£¼ ëŠë¼ëŠ” ê°ì •ì€ ë¬´ì—‡ì¸ê°€?",
                "ê°ì •ì„ ì–µëˆ„ë¥´ì§€ ì•Šê³  ê±´ê°•í•˜ê²Œ í‘œí˜„í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œ?",
                "ë‚˜ë¥¼ í™”ë‚˜ê²Œ ë§Œë“œëŠ” ê²ƒë“¤ì€ ë¬´ì—‡ì¸ê°€? ê·¸ ì´ìœ ëŠ”?",
                "ê¸°ì¨ì„ ëŠë‚„ ë•Œì™€ ìŠ¬í””ì„ ëŠë‚„ ë•Œì˜ ë‚˜ëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?",
                "ê°ì •ì ìœ¼ë¡œ í˜ë“¤ ë•Œ ë‚˜ë¥¼ ìœ„ë¡œí•´ì£¼ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€?"
            ],
            'relationships': [
                "ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ì–´ë–»ê²Œ ê´€ê³„ë¥¼ ë§ºëŠ”ê°€?",
                "ë‚´ê°€ ì†Œì¤‘í•˜ê²Œ ì—¬ê¸°ëŠ” ì‚¬ëŒë“¤ì€ ëˆ„êµ¬ì¸ê°€? ê·¸ ì´ìœ ëŠ”?",
                "ê°ˆë“± ìƒí™©ì—ì„œ ë‚˜ëŠ” ì–´ë–»ê²Œ í–‰ë™í•˜ëŠ”ê°€?",
                "ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ì£¼ê³  ìˆì„ê¹Œ?",
                "ê±´ê°•í•œ ê´€ê³„ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ë‚´ê°€ í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€?",
                "ë‚˜ëŠ” ì–¸ì œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê°€ì¥ í¸ì•ˆí•¨ì„ ëŠë¼ëŠ”ê°€?",
                "ë‚´ê°€ ë°›ê³  ì‹¶ì€ ì‚¬ë‘ì˜ ë°©ì‹ì€ ë¬´ì—‡ì¸ê°€?",
                "ë‹¤ë¥¸ ì‚¬ëŒì„ ì´í•´í•˜ê¸° ìœ„í•´ ë‚´ê°€ ë…¸ë ¥í•˜ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€?"
            ],
            'growth': [
                "ì§€ë‚œ 1ë…„ ë™ì•ˆ ë‚´ê°€ ê°€ì¥ ì„±ì¥í•œ ë¶€ë¶„ì€ ë¬´ì—‡ì¸ê°€?",
                "ë‚´ê°€ ê·¹ë³µí•˜ê³  ì‹¶ì€ ìŠµê´€ì´ë‚˜ íŒ¨í„´ì€ ë¬´ì—‡ì¸ê°€?",
                "ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš¸ ë•Œ ë‚˜ëŠ” ì–´ë–¤ ë°©ì‹ì„ ì„ í˜¸í•˜ëŠ”ê°€?",
                "ì‹¤íŒ¨ì—ì„œ ë°°ìš´ ê°€ì¥ ì†Œì¤‘í•œ êµí›ˆì€ ë¬´ì—‡ì¸ê°€?",
                "ë‚´ê°€ ë„ì „í•˜ê³  ì‹¶ì€ ìƒˆë¡œìš´ ê²ƒì€ ë¬´ì—‡ì¸ê°€?",
                "ì„±ì¥ì„ ìœ„í•´ ë‚´ê°€ í¬ê¸°í•´ì•¼ í•  ê²ƒì€ ë¬´ì—‡ì¸ê°€?",
                "ë‚˜ì˜ ë©˜í† ë‚˜ ë¡¤ëª¨ë¸ì€ ëˆ„êµ¬ì¸ê°€? ê·¸ë“¤ì—ê²Œì„œ ë¬´ì—‡ì„ ë°°ìš°ê³  ì‹¶ì€ê°€?",
                "í¸ì•ˆí•œ ì˜ì—­ì„ ë²—ì–´ë‚˜ê¸° ìœ„í•´ ë‚´ê°€ í•  ìˆ˜ ìˆëŠ” ì‘ì€ í–‰ë™ì€ ë¬´ì—‡ì¸ê°€?"
            ],
            'stress': [
                "ë‚˜ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì–´ë–»ê²Œ ì¸ì‹í•˜ê³  ìˆëŠ”ê°€?",
                "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì‹ ì²´ì , ì •ì‹ ì  ì‹ í˜¸ëŠ” ë¬´ì—‡ì¸ê°€?",
                "ë‚˜ë§Œì˜ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?",
                "ìŠ¤íŠ¸ë ˆìŠ¤ì˜ ê·¼ë³¸ ì›ì¸ì„ ì œê±°í•˜ê¸° ìœ„í•´ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆì„ê¹Œ?",
                "ì••ë°•ê°ì„ ëŠë‚„ ë•Œ ë‚˜ëŠ” ì–´ë–»ê²Œ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ”ê°€?",
                "íœ´ì‹ê³¼ ì¬ì¶©ì „ì„ ìœ„í•´ ë‚˜ëŠ” ë¬´ì—‡ì„ í•˜ëŠ”ê°€?",
                "ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œë„ ê¸ì •ì ì¸ ë©´ì„ ì°¾ì„ ìˆ˜ ìˆëŠ”ê°€?",
                "ë„ì›€ì´ í•„ìš”í•  ë•Œ ë‚˜ëŠ” ëˆ„êµ¬ì—ê²Œ ì˜ì§€í•˜ëŠ”ê°€?"
            ],
            'mindfulness': [
                "ì§€ê¸ˆ ì´ ìˆœê°„ ë‚˜ëŠ” ë¬´ì—‡ì„ ëŠë¼ê³  ìˆëŠ”ê°€?",
                "í˜„ì¬ì— ì§‘ì¤‘í•˜ê¸° ìœ„í•´ ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?",
                "ë§ˆìŒì´ í‰ì•ˆí•  ë•ŒëŠ” ì–¸ì œì¸ê°€?",
                "ì¼ìƒì—ì„œ ê°ì‚¬í•  ìˆ˜ ìˆëŠ” ì‘ì€ ê²ƒë“¤ì€ ë¬´ì—‡ì¸ê°€?",
                "ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ìì£¼ ê³¼ê±°ë‚˜ ë¯¸ë˜ì— ëŒ€í•´ ê±±ì •í•˜ëŠ”ê°€?",
                "ëª…ìƒì´ë‚˜ ë§ˆìŒì±™ê¹€ ì—°ìŠµì´ ë‚˜ì—ê²Œ ì–´ë–¤ ë„ì›€ì´ ë˜ëŠ”ê°€?",
                "ìì—°ê³¼ í•¨ê»˜ ìˆì„ ë•Œ ë‚˜ëŠ” ì–´ë–¤ ê¸°ë¶„ì´ ë“œëŠ”ê°€?",
                "ë‚´ë©´ì˜ í‰í™”ë¥¼ ì°¾ê¸° ìœ„í•´ ë¬´ì—‡ì´ í•„ìš”í•œê°€?"
            ]
        };
        
        let allQuestions = [];
        let currentReflectionQuestion = '';
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeQuestions();
            loadRandomQuestion();
        });
        
        function initializeQuestions() {
            // ëª¨ë“  ì§ˆë¬¸ì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì¹˜ê¸°
            Object.values(reflectionQuestions).forEach(categoryQuestions => {
                allQuestions = allQuestions.concat(categoryQuestions);
            });
            
            // ê° ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ ë Œë”ë§
            Object.entries(reflectionQuestions).forEach(([category, questions]) => {
                renderCategoryQuestions(category, questions);
            });
        }
        
        function renderCategoryQuestions(category, questions) {
            const container = document.getElementById(`questions-${category}`);
            container.innerHTML = questions.map((question, index) => `
                <div class="question-item">
                    <div class="question-text">${question}</div>
                    <div class="question-actions">
                        <button class="reflect-btn" onclick="openReflectionModal('${question}')">
                            <i class="fas fa-pen"></i> ì„±ì°°í•˜ê¸°
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function toggleCategory(category) {
            const questionsList = document.getElementById(`questions-${category}`);
            const toggle = document.getElementById(`toggle-${category}`);
            
            if (questionsList.classList.contains('expanded')) {
                questionsList.classList.remove('expanded');
                toggle.classList.remove('expanded');
            } else {
                // ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë“¤ ë‹«ê¸°
                document.querySelectorAll('.questions-list').forEach(list => {
                    list.classList.remove('expanded');
                });
                document.querySelectorAll('.category-toggle').forEach(t => {
                    t.classList.remove('expanded');
                });
                
                // í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì—´ê¸°
                questionsList.classList.add('expanded');
                toggle.classList.add('expanded');
            }
        }
        
        function loadRandomQuestion() {
            const randomQuestion = getRandomItem(allQuestions);
            document.getElementById('randomQuestionText').textContent = randomQuestion;
        }
        
        function openReflectionModal(question) {
            currentReflectionQuestion = question;
            document.getElementById('modalQuestion').textContent = question;
            document.getElementById('reflectionTextarea').value = '';
            document.getElementById('reflectionModal').style.display = 'block';
        }
        
        function closeReflectionModal() {
            document.getElementById('reflectionModal').style.display = 'none';
            currentReflectionQuestion = '';
        }
        
        function saveReflection() {
            const reflection = document.getElementById('reflectionTextarea').value.trim();
            
            if (!reflection) {
                showMessage('ì„±ì°° ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            const reflectionData = {
                question: currentReflectionQuestion,
                reflection: reflection,
                date: new Date().toISOString()
            };
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            let savedReflections = loadFromLocalStorage('reflections') || [];
            savedReflections.unshift(reflectionData);
            
            // ìµœê·¼ 20ê°œë§Œ ìœ ì§€
            if (savedReflections.length > 20) {
                savedReflections = savedReflections.slice(0, 20);
            }
            
            saveToLocalStorage('reflections', savedReflections);
            
            closeReflectionModal();
            showMessage('ì„±ì°°ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('reflectionModal');
            if (event.target === modal) {
                closeReflectionModal();
            }
        });
    </script>
</body>
</html>
